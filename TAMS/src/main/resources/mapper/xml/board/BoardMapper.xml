<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.trito.tams.web.sample.mapper.BoardMapper">
   
	<select id="webCountBoard" resultType="int" parameterType="kr.co.trito.tams.comm.util.search.SearchCondition">
		SELECT COUNT(*) FROM BOARD
		WHERE 1=1
		<if test="params.searchTitle != null">
			AND title LIKE CONCAT('%', #{params.searchTitle}, '%')		
		</if>		
	</select>   

	<select id="webSelectBoard" resultType="kr.co.trito.tams.web.sample.dto.BoardDto" parameterType="kr.co.trito.tams.comm.util.search.SearchCondition">
		SELECT id,
		       title
		FROM (
					SELECT ROW_NUMBER() OVER(ORDER BY CAST(board.id AS int)) AS rn, 
					       board.id,
					       board.title
					FROM BOARD AS board
					WHERE 1=1 
					<if test="params.searchTitle != null">
						AND title LIKE CONCAT('%', #{params.searchTitle}, '%') 		
					</if>								
			   ) AS a
		WHERE rn BETWEEN #{start} AND #{end}
	</select>

</mapper>