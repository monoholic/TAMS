<!DOCTYPE html>
<html 	xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorator="layout/popup2">

	<head>
	    <title>[[#{screen.text.inv.screen.title2}]]</title>
	</head>
        
	<!-- css -->
	<th:block layout:fragment="css">
	    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600,400' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/css/jsgrid.css" />
		<link rel="stylesheet" href="/css/theme.css" />
		
	</th:block>
	
	<th:block layout:fragment="script">
	
		<script>
		
			$(function(){
				
				let asetType = [];
				
				//등록자산 목록에서 저장한 데이터 로드
				let invData = $.commLoadSearchParams("invData");
				
		    	//항목값 설정
				$("#invNo").html(invData.invNo);		
				$("#invTtl").html(invData.invTtl);
				$("#poNo").html(invData.poNo);
				$("#mfgdNm").html(invData.mfgdNm);
				$("#qty").html(invData.qty);
				$("#uppDeptNm").html(invData.uppDeptNm);
				$("#deptNm").html(invData.deptNm);
				$("#invReqr").html(invData.invReqr);
				
				//공통코드 조회
		        getCommCode("#asetType1", "AS_CLASS", "1", "");
		        getCommCode("#bspic", "SITE", "", "");
		        getCommCode("#buld", "BUILDING", "", "");
		        getCommCode("#floor", "FLOOR", "", "");
		        getCommCode("#expDeptCd", "COST_CENTER", "", "");
		        getCommCode("#expAcct", "COST_ACCOUNT", "", "");

		        
		        /*------------------------ Event ------------------------*/
		    	
		    	//사용자 선택
	    	    $("#openUserPopup").on("click", function() { 
	    	        var url = "/common/popup/userPopup";
	    	        var popId = "userPopup";
	    	        var args = {width:650,	height:416};	    	        
	    	        var param = {userId:"#userId", userNm:"#userNm"};	    	        
	    	        openPopup2(popId, url, args, param);
	    	    });		    	
		    	
		    	
		    	let dept_url = "/common/popup/deptTreePopup";
		    	
	    	  	//사업부 선택
	     	    $("#openDeptPopup1").on("click", function() { 
	    	       var args = {width:500, height:450};
	    	       var param = {searchType:"BIZ_DEPT", deptCd:"#deptCd1", deptNm:"#deptNm1"};	    	         	  
	 	           openPopup2("DeptPopup", dept_url, args, param);
	     	    });		
	    	  	
	    	  	//부서 
	     	    $("#openDeptPopup").on("click", function() {
	     	    	var args = {width:500, height:450};
	     	    	var param = {searchType:"DEPT", deptCd:"#deptCd2", deptNm:"#deptNm2"};	    	        
	    	        openPopup2("DeptPopup", dept_url, args, param);
	     	    });	    	  	
	    	  	
		      	//자산유형1 change 이벤트
		        $("#asetType1").change(function(){
		        	let type1 = $("#asetType1").val();
	        		$('#asetType2').children('option:not(:first)').remove();
	        		$('#asetType3').children('option:not(:first)').remove();	        		
		        	if(type1 != '선택') {
		        		getCommCode("#asetType2", "AS_CLASS", "2", type1);
		        	}
		        });
		        
		        //자산유형2 change 이벤트
		        $("#asetType2").change(function(){
		        	let type2 = $("#asetType2").val();		        	
		        	$('#asetType3').children('option:not(:first)').remove();		        	
		        	if(type2 != '선택') {		        		
		        		getCommCode("#asetType3", "AS_CLASS", "3", type2);
		        	}
		        });		        	    	  	
	    	  	
			});
		
			function getCommCode(id, code, level, upperCodeId){				
				let url = "/common/comm/selectBox";
				let reqType = 'GET';
				$.commRequestSelectbox(url, reqType, id, code, level, upperCodeId);			
			}
		</script>
	
	</th:block>

	<div layout:fragment="content">

		<!-- container -->
		<div id="container-pop">
			<!-- contents -->
			<div id="contents">
				<!-- contents_head -->
				<h3>[[#{screen.text.inv.screen.title2}]]</h3>
				<!-- //contents_head -->
				
				<!-- detail_table -->
				<table class="detail_table form_s">
					<colgroup>
					<col style="width:12%" />
					<col style="width:20%" />
					<col style="width:12%" />
					<col style="width:20%" />
					<col style="width:12%" />
					<col />
					</colgroup>
					<tr>
						<th>[[#{screen.text.inv.no}]]</th>
						<td><span id="invNo"></span></td>
						<th>[[#{screen.text.inv.ttl}]]</th>
						<td colspan="3"><span id="invTtl"></span></td>

					</tr>
					<tr>
						<th>[[#{screen.text.po.no}]]</th>
						<td><span id="poNo"></span></td>					
						<th>[[#{screen.text.po.mfgdnm}]]</th>
						<td><span id="mfgdNm"></span></td>
						<th>[[#{screen.text.comm.qty}]]</th>
						<td><span id="qty"></span></td>

					</tr>
					<tr>
						<th>[[#{screen.text.asset.bizDeptCd}]]</th>
						<td><span id="uppDeptNm"></span></td>					
						<th>[[#{screen.text.asset.deptCd}]]</th>
						<td><span id="deptNm"></span></td>
						<th>[[#{screen.text.asset.chrgr}]]</th>
						<td><span id="invReqr"></span></td>
					</tr>
				</table>
				<!-- //detail_table -->				
				
				<p class="space10"></p>
				
				<!-- list -->
				<div class="list_wrap">
					<!-- list_head -->
					<div class="list_head">
						<h6>[[#{screen.text.inv.screen.subtitle1}]]</h6>
						<!-- list_button -->
						<div class="button">
							<a class="btn_list">저장</a>
							<a class="btn_list">삭제</a>
						</div>
						<!-- list_button -->
					</div>
					<!-- //list_head -->

					<!-- detail_table -->
					<table class="detail_table form_s">
						<colgroup>
						<col style="width:12%" />
						<col style="width:20%" />
						<col style="width:12%" />
						<col style="width:20%" />
						<col style="width:12%" />
						<col />
						</colgroup>
						<tr>
							<th>[[#{screen.popup.text.asset.no}]]</th>
							<td>-</td>
							<th>[[#{screen.text.aset.nm2}]]</th>
							<td colspan="3"><input type="text" id="asetNm" style="width:100%;"></td>
						</tr>
						<tr>
							<th>[[#{screen.popup.text.asset.type1}]]</th>
							<td>
								<select id="asetType1" style="width:100%;">
									<option value="">[[#{screen.text.comm.choice}]]</option>
								</select>
							</td>
							<th>[[#{screen.popup.text.asset.type2}]]</th>
							<td>
								<select id="asetType2" style="width:100%;">
									<option value="">[[#{screen.text.comm.choice}]]</option>
								</select>	
							</td>
							<th>[[#{screen.popup.text.asset.type3}]]</th>
							<td>
								<select id="asetType3" style="width:100%;">
									<option value="">[[#{screen.text.comm.choice}]]</option>
								</select>
							</td>
						</tr>
						<tr>
							<th>[[#{screen.text.asset.mftco}]]</th>
							<td><input type="text" id="mftco" style="width:100%;" value=""></td>
							<th>[[#{screen.text.asset.model}]]</th>
							<td><input type="text" id="model" style="width:100%;" value=""></td>
							<th>[[#{screen.text.asset.sn}]]</th>
							<td><input type="text" id="sn" style="width:100%;" value=""></td>
						</tr>
						<tr>
							<th>[[#{screen.text.asset.bizDeptCd}]]</th>
							<td>
								<input type="hidden" id="deptCd1"/>
								<div class="inqr_popup_btn">
									<input type="text" id="deptNm1" style="width:100%; border-right: 1px none;" />
									<a href="#" id="openDeptPopup1" ><img title="사업부 검색" class="ico_search" alt="Search" src="/images/common/ico_search.png"></a>
								</div>
							</td>
							<th>[[#{screen.text.asset.deptCd}]]</th>
							<td>
								<input type="hidden" id="deptCd2"/>
								<div class="inqr_popup_btn">
									<input type="text" id="deptNm2" style="width:100%; border-right: 1px none;" />
									<a href="#" id="openDeptPopup" ><img title="부서 검색" class="ico_search" alt="Search" src="/images/common/ico_search.png"></a>
								</div>
							</td>
							<th>[[#{screen.text.asset.asetChrgr}]]</th>
							<td>
								<input type="hidden" id="userId"/>
								<div class="inqr_popup_btn">
									<input type="text" id="userNm" style="width:100%; border-right: 1px none;" />
									<a href="#" id="openUserPopup" ><img title="사용자검색" class="ico_search" alt="Search" src="/images/common/ico_search.png"></a>
								</div>
							</td>
						</tr>
						<tr>
							<th>[[#{screen.text.aset.bspic}]]</th>
							<td>
	                            <select id="bspic" style="width:100%;">
	                            	<option value="">[[#{screen.text.comm.choice}]]</option>
	                            </select>
							</td>
							<th>[[#{screen.text.aset.buld}]]</th>
							<td>
	                            <select id="buld" style="width:100%;">
	                            	<option value="">[[#{screen.text.comm.choice}]]</option>
	                            </select>
							</td>
							<th>[[#{screen.text.aset.floor}]]</th>
							<td>
	                            <select id="floor" style="width:100%;">
	                            	<option value="">[[#{screen.text.comm.choice}]]</option>
	                            </select>
							</td>
						</tr>
						<tr>
							<th>[[#{screen.text.aset.loc}]]</th>
							<td colspan="5"><input type="text" id="loc" style="width:100%;" value=""></td>
						</tr>
						<tr>
							<th>[[#{screen.text.aset.expDeptCd}]]</th>
							<td>
	                            <select id="expDeptCd" style="width:100%;">
	                            	<option value="">선택</option>
	                            </select>
							</td>
							<th>[[#{screen.text.aset.expAcct}]]</th>
							<td>
	                            <select id="expAcct" style="width:100%;">
	                            	<option value="">선택</option>
	                            </select>
							</td>
							<th>[[#{screen.text.aset.durYear}]]</th>
							<td><input type="text" id="durYear" style="width:100%;"></td>
						</tr>
						<tr>
							<th>[[#{screen.text.aset.acqPrc}]]</th>
							<td><input type="text" id="arqPrc" style="width:100%;" value=""></td>
							<th>[[#{screen.text.aset.svalPrc}]]</th>
							<td><input type="text" id="svalPrc" style="width:100%;"></td>
							<th>[[#{screen.text.aset.acqDt}]]</th>
							<td><input type="date" id="acqDt" style="width:100%;"></td>
						</tr>
					</table>
					<!-- //detail_table -->
				</div>
				<!-- //list -->

				<p class="space10"></p>

				<!-- list -->
				<div class="list_wrap">
					<!-- list_head -->
					<div class="list_head">
						<h6>[[#{screen.text.inv.screen.subtitle2}]]</h6>
					</div>
					<!-- //list_head -->

					<!-- detail_table -->
					<table class="detail_table form_s">
						<colgroup>
						<col style="width:12%" />
						<col style="width:20%" />
						<col style="width:12%" />
						<col style="width:20%" />						
						<col style="width:12%" />
						<col />
						</colgroup>
						<tr>
							<th>크기</th>
							<td><input type="text" style="width:100%;" value="유형자산"></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>							
						</tr>
						<tr>
							<th>크기</th>
							<td><input type="text" style="width:100%;" value="유형자산"></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>		
						</tr>
						<tr>
							<th>크기</th>
							<td><input type="text" style="width:100%;" value="유형자산"></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>
							<th>타입</th>
							<td><input type="text" style="width:100%;" value=""></td>		
						</tr>						
					</table>
				</div>
				<!-- //list -->

			</div>
			<!-- //contents -->
		</div>
		<!-- //container -->
	</div>			
</html>